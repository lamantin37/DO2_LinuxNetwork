## Part 1. Инструмент **ipcalc**

#### 1.1. Сети и маски
##### 1) адрес сети *192.167.38.54/13*
![](screenshots/1_1_1.png)
##### 2) перевод маски *255.255.255.0* в префиксную и двоичную запись, */15* в обычную и двоичную, *11111111.11111111.11111111.11110000* в обычную и префиксную
![](screenshots/1_1_2.png)
![](screenshots/1_1_3.png)
![](screenshots/1_1_4.png)
##### 3) минимальный и максимальный хост в сети *12.167.38.4* при масках: */8*, *11111111.11111111.00000000.00000000*, *255.255.254.0* и */4*
![](screenshots/1_1_5.png)
![](screenshots/1_1_6.png)
![](screenshots/1_1_7.png)
![](screenshots/1_1_8.png)

#### 1.2. localhost
##### Определить и записать в отчёт, можно ли обратиться к приложению, работающему на localhost, со следующими IP: *194.34.23.100*, *127.0.0.2*, *127.1.0.1*, *128.0.0.1*
![](screenshots/1_2_1.png)
![](screenshots/1_2_2.png)
![](screenshots/1_2_3.png)
![](screenshots/1_2_4.png)
##### Адреса: *127.0.0.2*, *127.1.0.1* нам подходят
#### 1.3. Диапазоны и сегменты сетей
##### 1) какие из перечисленных IP можно использовать в качестве публичного, а какие только в качестве частных: *10.0.0.45*, *134.43.0.2*, *192.168.4.2*, *172.20.250.4*, *172.0.2.1*, *192.172.0.1*, *172.68.0.2*, *172.16.255.255*, *10.10.10.10*, *192.169.168.1*
![](screenshots/1_3_1.png)
![](screenshots/1_3_2.png)
![](screenshots/1_3_3.png)
![](screenshots/1_3_4.png)
![](screenshots/1_3_5.png)
![](screenshots/1_3_6.png)
![](screenshots/1_3_7.png)
![](screenshots/1_3_8.png)
![](screenshots/1_3_9.png)
##### Адреса 10.0.0.45, 192.168.4.2, 172.20.250.4, 172.16.255.255, 10.10.10.10 можно использовать только в качестве частных.
##### Адреса 134.43.0.2, 172.0.2.1, 192.172.0.1, 172.68.0.2, 192.169.168.1 можно использовать в качестве публичных.
##### 2) какие из перечисленных IP адресов шлюза возможны у сети *10.10.0.0/18*: *10.0.0.1*, *10.10.0.2*, *10.10.10.10*, *10.10.100.1*, *10.10.1.255*
![](screenshots/1_3_10.png)
##### Возможны адреса 10.10.0.2, 10.10.10.10 и 10.10.1.255

## Part 2. Статическая маршрутизация между двумя машинами
##### Поднять две виртуальные машины (далее -- ws1 и ws2)

##### С помощью команды `ip a` посмотреть существующие сетевые интерфейсы
![](screenshots/2_1_1.png)
![](screenshots/2_1_2.png)
##### Описать сетевой интерфейс, соответствующий внутренней сети, на обеих машинах и задать следующие адреса и маски: ws1 - *192.168.100.10*, маска */16*, ws2 - *172.24.116.8*, маска */12*
![](screenshots/2_1_3.png)
![](screenshots/2_1_4.png)
##### Выполнить команду `netplan apply` для перезапуска сервиса сети

#### 2.1. Добавление статического маршрута вручную
##### Добавить статический маршрут от одной машины до другой и обратно при помощи команды вида `ip r add`
##### Пропинговать соединение между машинами
![](screenshots/2_1_5.png)
![](screenshots/2_1_6.png)

### 2.2. Добавление статического маршрута с сохранением
##### Перезапустить машины
##### Добавить статический маршрут от одной машины до другой с помощью файла *etc/netplan/00-installer-config.yaml*
##### Пропинговать соединение между машинами
![](screenshots/2_2_1.png)
![](screenshots/2_2_2.png)

#### 3.1. Скорость соединения
##### Перевести и записать в отчёт: 8 Mbps в MB/s, 100 MB/s в Kbps, 1 Gbps в Mbps
##### 8 Mbps = 1 MB/s
##### 100 MB/s = 819200 Kbps
##### 1 Gbps = 1024 Mbps

#### 3.2. Утилита **iperf3**
##### Измерить скорость соединения между ws1 и ws2
![](screenshots/3_1_1.png)

#### 4.1. Утилита **iptables**
##### Создать файл */etc/firewall.sh*, имитирующий фаерволл, на ws1 и ws2:
```shell
#!/bin/sh

# Удаление всех правил в таблице "filter" (по-умолчанию).
iptables –F
iptables -X
```
##### Нужно добавить в файл подряд следующие правила:
##### 1) на ws1 применить стратегию когда в начале пишется запрещающее правило, а в конце пишется разрешающее правило (это касается пунктов 4 и 5)
##### 2) на ws2 применить стратегию когда в начале пишется разрешающее правило, а в конце пишется запрещающее правило (это касается пунктов 4 и 5)
##### 3) открыть на машинах доступ для порта 22 (ssh) и порта 80 (http)
##### 4) запретить *echo reply* (машина не должна "пинговаться”, т.е. должна быть блокировка на OUTPUT)
##### 5) разрешить *echo reply* (машина должна "пинговаться")
##### Запустить файлы на обеих машинах командами `chmod +x /etc/firewall.sh` и `/etc/firewall.sh`
![](screenshots/4_1_1.png)
##### Разница между стратегиями заключается в том, что в первом файле первым подходящим правилом для пакета является запрет, а во втором - разрешение. Применяется только первое подходящее правило, остальные игнорируются.

#### 4.2. Утилита **nmap**
##### Командой **ping** найти машину, которая не "пингуется", после чего утилитой **nmap** показать, что хост машины запущен
![](screenshots/4_1_2.png)
![](screenshots/4_1_3.png)
